<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<oddjob>
    <job>
        <sequential>
            <jobs>
                <variables id="vars">
                    <listA>
                        <list>
                            <values>
                                <bean class="org.oddjob.beancmpr.beans.BeanComparerBeanTest$Snack">
                                    <fruit>
                                        <bean class="org.oddjob.beancmpr.beans.BeanComparerBeanTest$Fruit" type="banana"/>
                                    </fruit>
                                </bean>
                                <bean class="org.oddjob.beancmpr.beans.BeanComparerBeanTest$Snack">
                                    <fruit>
                                        <bean class="org.oddjob.beancmpr.beans.BeanComparerBeanTest$Fruit" colour="green" type="APPLE"/>
                                    </fruit>
                                </bean>
                                <bean class="org.oddjob.beancmpr.beans.BeanComparerBeanTest$Snack">
                                    <fruit>
                                        <bean class="org.oddjob.beancmpr.beans.BeanComparerBeanTest$Fruit" colour="pear" type="red"/>
                                    </fruit>
                                </bean>
                            </values>
                        </list>
                    </listA>
                    <listB>
                        <list>
                            <values>
                                <bean class="org.oddjob.beancmpr.beans.BeanComparerBeanTest$Snack">
                                    <fruit>
                                        <bean class="org.oddjob.beancmpr.beans.BeanComparerBeanTest$Fruit" type="banana"/>
                                    </fruit>
                                </bean>
                                <bean class="org.oddjob.beancmpr.beans.BeanComparerBeanTest$Snack">
                                    <fruit>
                                        <bean class="org.oddjob.beancmpr.beans.BeanComparerBeanTest$Fruit" colour="green" type="apple"/>
                                    </fruit>
                                </bean>
                                <bean class="org.oddjob.beancmpr.beans.BeanComparerBeanTest$Snack">
                                    <fruit>
                                        <bean class="org.oddjob.beancmpr.beans.BeanComparerBeanTest$Fruit" colour="pear" type="green"/>
                                    </fruit>
                                </bean>
                            </values>
                        </list>
                    </listB>
                </variables>
                <beancmpr:compare id="compare" keyProperties="fruit" xmlns:beancmpr="oddjob:beancmpr">
                    <inX>
                        <value value="${vars.listA}"/>
                    </inX>
                    <inY>
                        <value value="${vars.listB}"/>
                    </inY>
                    <results>
                        <beancmpr:bean-results>
                            <out>
                                <list/>
                            </out>
                        </beancmpr:bean-results>
                    </results>
                    <comparersByProperty>
                        <beancmpr:comparers-map>
                            <comparerForProperty>
                                <beancmpr:bean-comparer key="fruit"/>
                            </comparerForProperty>
                        </beancmpr:comparers-map>
                    </comparersByProperty>
                    <comparersByType>
                        <beancmpr:comparers-list>
                            <comparers>
                                <beancmpr:text-comparer ignoreCase="true"/>
                            </comparers>
                        </beancmpr:comparers-list>
                    </comparersByType>
                </beancmpr:compare>
                <bean-report>
                    <beans>
                        <value value="${compare.results.out}"/>
                    </beans>
                </bean-report>
            </jobs>
        </sequential>
    </job>
</oddjob>
