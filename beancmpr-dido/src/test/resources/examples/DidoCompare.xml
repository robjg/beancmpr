<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<oddjob>
    <job>
        <sequential>
            <jobs>
                <dido:data-in id="data1" name="Data 1" xmlns:dido="oddjob:dido">
                    <how>
                        <dido:csv>
                            <schema>
                                <dido:schema>
                                    <of>
                                        <dido:field name="fruit" type="java.lang.String"/>
                                        <dido:field name="colour" type="java.lang.String"/>
                                        <dido:field name="qty" type="int"/>
                                        <dido:field name="price" type="double"/>
                                        <dido:field name="comments" type="java.lang.String"/>
                                    </of>
                                </dido:schema>
                            </schema>
                        </dido:csv>
                    </how>
                    <from>
                        <buffer>
                            <![CDATA[apple,red,5,22.4,crunchy
apple,green,7,23.2,crisp
banana,yellow,3,46.4,bent
orange,orange,2,57,2,healthy
pear,green,8,37,shapely]]>
                        </buffer>
                    </from>
                    <to>
                        <list/>
                    </to>
                </dido:data-in>
                <dido:data-in id="data2" name="Data 2" xmlns:dido="oddjob:dido">
                    <how>
                        <dido:csv>
                            <schema>
                                <dido:schema>
                                    <of>
                                        <dido:field name="fruit" type="java.lang.String"/>
                                        <dido:field name="colour" type="java.lang.String"/>
                                        <dido:field name="qty" type="int"/>
                                        <dido:field name="price" type="double"/>
                                        <dido:field name="comments" type="java.lang.String"/>
                                    </of>
                                </dido:schema>
                            </schema>
                        </dido:csv>
                    </how>
                    <from>
                        <buffer>
                            <![CDATA[apple,red,5,22.4,crunchy
apple,green,7,23.2,crisp
banana,yellow,3,46.4,bent
orange,orange,2,57,2,healthy
pear,gree,8,37,shapely]]>
                        </buffer>
                    </from>
                    <to>
                        <list/>
                    </to>
                </dido:data-in>
                <beancmpr:compare id="comparison" xmlns:beancmpr="oddjob:beancmpr">
                    <inX>
                        <value value="${data1.to}"/>
                    </inX>
                    <inY>
                        <value value="${data2.to}"/>
                    </inY>
                    <comparer>
                        <didocmpr:collection-comparer keys="fruit,colour" others="comments" sorted="false" values="qty, price" xmlns:didocmpr="oddjob:didocmpr"/>
                    </comparer>
                    <results>
                        <beancmpr:bean-results>
                            <out>
                                <list/>
                            </out>
                        </beancmpr:bean-results>
                    </results>
                </beancmpr:compare>
                <bean-report>
                    <output>
                        <tee>
                            <outputs>
                                <stdout/>
                                <identify id="results">
                                    <value>
                                        <buffer/>
                                    </value>
                                </identify>
                            </outputs>
                        </tee>
                    </output>
                    <beans>
                        <value value="${comparison.results.out}"/>
                    </beans>
                </bean-report>
            </jobs>
        </sequential>
    </job>
</oddjob>
